From df24f2aa192153241a12711a95e861806db315f3 Mon Sep 17 00:00:00 2001
From: Todd Lipcon <todd@cloudera.com>
Date: Fri, 8 Oct 2010 15:29:23 -0700
Subject: [PATCH 25/30] HBASE-3096. TestCompaction timing out

Author: Todd Lipcon
---
 .../hadoop/hbase/regionserver/TestCompaction.java  |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java b/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java
index 34b8044..9da4031 100644
--- a/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java
+++ b/src/test/java/org/apache/hadoop/hbase/regionserver/TestCompaction.java
@@ -61,7 +61,7 @@ public class TestCompaction extends HBaseTestCase {
 
     // Set cache flush size to 1MB
     conf.setInt("hbase.hregion.memstore.flush.size", 1024*1024);
-    conf.setInt("hbase.hregion.memstore.block.multiplier", 10);
+    conf.setInt("hbase.hregion.memstore.block.multiplier", 30);
     this.cluster = null;
   }
 
@@ -94,9 +94,9 @@ public class TestCompaction extends HBaseTestCase {
    * @throws IOException
    */
   public void testMajorCompactingToNoOutput() throws IOException {
-    createStoreFile(r);
+    createSmallerStoreFile(r);
     for (int i = 0; i < COMPACTION_THRESHOLD; i++) {
-      createStoreFile(r);
+      createSmallerStoreFile(r);
     }
     // Now delete everything.
     InternalScanner s = r.getScanner(new Scan());
-- 
1.7.0.4

